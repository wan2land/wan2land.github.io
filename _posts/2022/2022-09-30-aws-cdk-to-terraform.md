---
layout: post
title: "AWS CDKì—ì„œ Terraformìœ¼ë¡œ ì´ì£¼í•˜ê¸°"
date: 2022-09-30 10:01:53 +09:00
tags: ["awscdk", "terraform", "infrastructure"]
thumbnail: "/images/2022/2022-09-30-aws-cdk-to-terraform/thumbnail.png"
---

2018ë…„, ì²˜ìŒ ì €í¬ íšŒì‚¬ì— IaC(Infrastructure as Code)ë¥¼ ë„ìž…í•  ë• Terraformì„ ì‚¬ìš© í–ˆìŠµë‹ˆë‹¤.(ê³¼ê±° í¬ìŠ¤íŒ…, [Infrastructure as Code ì‚½ì§ˆê¸°](/posts/2018/11/18/infrastructure-as-code/))

ì´í›„ 2020ë…„ì¯¤(ê³¼ê±° í¬ìŠ¤íŒ…ì„ ì‚´íŽ´ë³´ë‹ˆ), AWSì—ì„œ CDK(Cloud Development Kit)ë¼ëŠ” ì¸í”„ë¼ ê´€ë¦¬ ë„êµ¬ê°€ ì¶œì‹œë˜ì—ˆìŠµë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ê°œë°œìžì—ê²Œ ìµìˆ™í•œ Typescriptì™€ Pythonìœ¼ë¡œ ì¸í”„ë¼ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìžˆë‹¤ëŠ” ì ì„ ìž¥ì ìœ¼ë¡œ ë‚´ì„¸ì› ìŠµë‹ˆë‹¤.
ë‹¹ì‹œ ì €í¬íšŒì‚¬ëŠ” ì „ì²´ í° ê·¸ë¦¼ì€ Terraformì„ ì‚¬ìš©í–ˆê³ , ìž‘ì€ ì„œë¹„ìŠ¤ëŠ” Serverless Frameworkë¥¼ ì‚¬ìš©í•˜ê³  ìžˆì—ˆìŠµë‹ˆë‹¤. Serverless Frameworkë¥¼ ì‚¬ìš©í–ˆê¸° ë•Œë¬¸ì— CloudFormationì— ì´ë¯¸ ìµìˆ™í•œ ìƒíƒœì˜€ìŠµë‹ˆë‹¤.
ì¸í”„ë¼ ìŠ¤íƒì„ í•˜ë‚˜ ì¦‰ CloudFormationìœ¼ë¡œ ì¼ì›í™”í•˜ê³  ì‹¶ì€ ìš•êµ¬ê°€ ìƒê²¨ CDKë¥¼ ì ê·¹ì ìœ¼ë¡œ ë„ìž…í–ˆìŠµë‹ˆë‹¤. ~~ê·¸ëŸ° ì§“ì€ í•˜ì§€ ë§ì•„ì•¼ í–ˆëŠ”ë° ë‚œ ê·¸ ì‚¬ì‹¤ì„ ëª°ëžì–´.~~ ê·¸ë•Œ ë‹¹ì‹œ CDKì™€ ê´€ë ¨ëœ í¬ìŠ¤íŒ…ë„ ì—¬ëŸ¬ ì°¨ë¡€ ì˜¬ë ¸ìŠµë‹ˆë‹¤. ðŸ˜…

CDKëŠ” ì¸í”„ë¼ê°€ ë³µìž¡í•´ì§€ë©´ ë³µìž¡í•´ì§ˆìˆ˜ë¡ ì‚¬ìš©í•˜ê¸°ê°€ ì–´ë ¤ì› ìŠµë‹ˆë‹¤. ê²°êµ­ Terraformìœ¼ë¡œ ë‹¤ì‹œ ëŒì•„ê°€ê¸°ë¡œ ê²°ì •, ê·¸ë™ì•ˆ ëŠê¼ˆë˜ ë‹¨ì ì— ëŒ€í•´ ëª‡ ê°€ì§€ ì´ì•¼ê¸°í•´ë³´ìžë©´,

**1. ì°¸ê³ í•  ë‚´ìš©ì´ ë³„ë¡œ ì—†ë‹¤.**

CDKë¥¼ ë„ìž…í•˜ë©´ì„œ ê°€ìž¥ íž˜ë“¤ì—ˆë˜ ì ìž…ë‹ˆë‹¤. ì• ì´ˆì— CDK ì¶œì‹œ ì´ˆê¸°ì— ë„ìž…í–ˆê¸° ë•Œë¬¸ì— ì–´ëŠ ì •ë„ì˜ ë¶ˆíŽ¸í•¨ì€ ê°ìˆ˜í•˜ê³  ìžˆì—ˆìŠµë‹ˆë‹¤. CDKë¥¼ ì‚¬ìš©í•˜ë‹¤ê°€ ë§‰ížˆë©´ CloudFormationì˜ ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì˜€ê³ , ì´ì— ëŒ€ì‘ë˜ëŠ” CDKì˜ íŒ¨í‚¤ì§€ì™€ ê°ì²´ ì´ë¦„ì„ í†µí•´ ì¶”ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.
ë¬¸ì œëŠ”, CloudFormationë„ ë¬¸ì„œê°€ ì¹œì ˆí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. Terraformì€ ìžì›(Resource, ì˜ˆ, EC2 Instance, S3 Bucket ë“±) ë³„ë¡œ ë¬¸ì„œë„ ìž˜ ì •ë¦¬ë˜ì–´ìžˆê³  ê·¸ì— ëŒ€í•œ ì˜ˆì‹œë„ ì¶©ë¶„ížˆ ì œê³µí•©ë‹ˆë‹¤. ìŠ¤íƒì˜¤ë²„í”Œë¡œìš°ëŠ” ë§í•  ê²ƒë„ ì—†ì§€ìš”.

**2. ìƒíƒœë¥¼ ì¶”ì í•˜ê¸° ì–´ë µë‹¤.**

CDKëŠ” CloudFormationì„ ê¸°ë°˜ìœ¼ë¡œ ë™ìž‘í•©ë‹ˆë‹¤. Typescriptë¥¼ ì´ìš©í•´ì„œ CloudFormation Templateì„ ìž‘ì„±í•©ë‹ˆë‹¤. DSL(Domain-specific language)ìœ¼ë¡œì„œ Typescriptë¥¼ ì´ìš©í•˜ëŠ” ì…ˆì´ì§€ìš”. ê·¼ë° TypescriptëŠ” ë§ˆí¬ì—… ì–¸ì–´ê°€ ì•„ë‹ˆê³ , í”„ë¡œê·¸ëž˜ë° ì–¸ì–´ìž…ë‹ˆë‹¤.
ê·¸ëž˜ì„œ ê·¸ëŸ°ê°€.. ì½”ë”© ì¤‘ê°„ ì¤‘ê°„ ë³€ìˆ˜ì˜ ìƒíƒœë¥¼ ë³´ë ¤ê³  ì‹œë„í•˜ì˜€ìŠµë‹ˆë‹¤. ì¤‘ê°„ì— ë§Œë“¤ì–´ì§„ ìžì›ì„ ì½˜ì†”ë¡œê·¸ë¡œ ì¶œë ¥í•´ë³´ë©´  `'${Token[AWS.AccountId.7]}'`, `'${Token[TOKEN.116]}'`ì™€ ê°™ì€ ë¬¸ìžì—´ì„ ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì‹¤ì œ ìžì›ì˜ ARNì´ë‚˜ ì´ë¦„ì´ ë‚˜ì˜¬ ì¤„ ì•Œì•˜ì§€ë§Œ,
ìœ ì¶”í•˜ê¸° ì–´ë ¤ìš´ ë¬¸ìžì—´ìž…ë‹ˆë‹¤. CDKë¡œ ìž‘ì„±í•œ ë¡œì§ì´ ì „ë¶€ ë™ìž‘í•œ í›„, ìœ„ í† í°ì´ CloudFormationì˜ ìžì›(CloudFormation ë‹¤ë¥¸ ìžì›ì˜ ARN, ID ë“±)ìœ¼ë¡œ ëŒ€ì¹˜ë˜ê² ë„¤ìš”.

í”„ë¡œê·¸ëž˜ë° ì–¸ì–´ë¼ì„œ ìƒíƒœë¥¼ ì¶”ì í•˜ë©´ì„œ ì½”ë”© í•  ìˆ˜ ìžˆì„ê±°ëž€ ê¸°ëŒ€ê°€ ìžˆì—ˆëŠ”ë°, í¬ê²Œ ì˜ë¯¸ê°€ ì—†ì—ˆìŠµë‹ˆë‹¤.

**3. AWS ìžì› êµ¬ì¡°ì— ìµìˆ™í•  ìˆ˜ë¡, ê°ì²´ ë°©ì‹ì˜ ì¶”ìƒí™”ê°€ ë°©í•´ëœë‹¤.**

Typescript ì½”ë“œ ìžë™ì™„ì„±ì€ ì½”ë”©í•  ë•Œ êµ‰ìž¥ížˆ íŽ¸ë¦¬í•©ë‹ˆë‹¤. ëª¨ë“  ê²ƒì„ ê¸°ì–µí•˜ì§€ ì•Šì•„ë„ ë˜ê¸° ë•Œë¬¸ìž…ë‹ˆë‹¤. CDKë¥¼ ì‚¬ìš©í•˜ë‹¤ë³´ë©´ ë§¤ê°œë³€ìˆ˜ë¡œ ì¸í„°íŽ˜ì´ìŠ¤ í˜•ì‹ì„ ìš”ì²­í•˜ëŠ” ê²½ìš°ê°€ ë§ŽìŠµë‹ˆë‹¤. (ë¬¼ë¡ , ì´ëŸ¬í•œ ë°©ì‹ì´ ì‹¤ìˆ˜ë¥¼ ë°©ì§€í•˜ëŠ”ë° í° ë„ì›€ì´ ë©ë‹ˆë‹¤.)

ë‹¤ìŒì€ RestAPI(Api Gateway)ì— HTTPSë¥¼ ìœ„í•´ ì¸ì¦ì„œë¥¼ ì—°ê²°í•˜ëŠ” ì½”ë“œìž…ë‹ˆë‹¤.

```tsx
import { RestApi } from '@aws-cdk/aws-apigateway'
import { Certificate } from '@aws-cdk/aws-certificatemanager'

const certificate = Certificate.fromCertificateArn(
  this,
  'Certificate',
  'arn:aws:acm:us-east-1:012345678910:certificate/00000000-1111-dddd-eeee-ffffffffffff',
)
new RestApi(this, 'MyRestApi', {
  domainName: {
    certificate,
  },
})
```

ë°œê¸‰ë°›ì€ ì¸ì¦ì„œëŠ” ARNì„ ì´ìš©í•´ì„œ ì ‘ê·¼í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. RestApi ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ ì¸ì¦ì„œ ì •ë³´ëŠ” Certificate ì¸í„°íŽ˜ì´ìŠ¤ì˜ í˜•íƒœë¡œ ìš”êµ¬í•©ë‹ˆë‹¤. ì´ë¥¼ ì „ë‹¬í•˜ê¸° ìœ„í•´ (1) `@aws-cdk/aws-certificatemanager` íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜, (2) Certificate ê°ì²´ë¥¼ ARNì„ í†µí•´ ìƒì„±, (3) ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬í•˜ëŠ” ê³¼ì •ì„ ê±°ì³ì•¼ í•©ë‹ˆë‹¤. ë‹¹ì—°ížˆ ìƒˆë¡­ê²Œ ì„¤ì¹˜í•œ íŒ¨í‚¤ì§€ì™€ ê¸°ì¡´ì— ìžˆë˜ CDK ê´€ë ¨ íŒ¨í‚¤ì§€ë¼ë¦¬ ë²„ì „ë„ ë˜‘ê°™ì´ ë§žì¶°ì•¼ í•©ë‹ˆë‹¤. ðŸ˜±

ë°˜ë©´, Terraformì€ ìžì²´ì ìœ¼ë¡œ êµ¬í˜„í•œ HCLì´ëž€ ì–¸ì–´ë¥¼ í†µí•´ ìžì›ì˜ ARNì„ ë°”ë¡œ ì—°ê²°í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤..

**4. ë°°í¬ ì‹¤íŒ¨ ì‹œ ëŒ€ì‘í•˜ê¸° ì–´ë µë‹¤.**

ë°°í¬í•˜ë‹¤ê°€ ì—ëŸ¬ë¼ë„ ë°œìƒí•œë‹¤ë©´, ê²°êµ­ AWS Consoleì— ì ‘ì†, CloudFormationìœ¼ë¡œ ì´ë™í•´ì„œ ë¡œê·¸ë¥¼ ì‚´íŽ´ë´ì•¼ í•©ë‹ˆë‹¤.

**5. ë¦¬íŒ©í† ë§ í•˜ê¸°ê°€ ì–´ë µë‹¤.**

í”„ë¡œê·¸ëž˜ë° ê³¼ì •ì—ì„œ ê·œëª¨ê°€ ì»¤ì§€ë©´ ë¦¬íŒ©í† ë§ì´ í•„ìš”í•˜ë“¯, ì¸í”„ë¼ë„ ê·œëª¨ê°€ ì»¤ì§€ë©´ ë¦¬íŒ©í† ë§ì´ í•„ìš”í•©ë‹ˆë‹¤. CloudFormationì˜ ìŠ¤íƒì´ ì»¤ì§€ë©´ ë°°í¬í•˜ëŠ”ë° ê±¸ë¦¬ëŠ” ì‹œê°„ë„ ì ì  ê¸¸ì–´ì§‘ë‹ˆë‹¤. CloudFormationì€ ìžì›ì„ ì‚­ì œí•˜ì§€ ì•Šê³  ìžì›ì„ ë¶„ë¦¬í•´ì„œ ë‹¤ë¥¸ ìŠ¤íƒìœ¼ë¡œ ì´ë™í•˜ëŠ” ìž‘ì—…ì´ êµ‰ìž¥ížˆ ì–´ë µìŠµë‹ˆë‹¤. (ì‹¬ì§€ì–´ ì´ëŸ¬í•œ ê¸°ëŠ¥ì€ ë¹„êµì  ìµœê·¼ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.) ì½”ë“œì™€ CLI ëª…ë ¹ì–´ë¡œë§Œ ì´ëŸ¬í•œ ìž‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ”ê²Œ ì‰½ì§€ ì•ŠìŠµë‹ˆë‹¤. ê±°ì˜ ì›¹ì½˜ì†”ë¡œ ì§„í–‰í•´ì•¼í•©ë‹ˆë‹¤.

ì´ê²Œ CDKë¥¼ ê±·ì–´ë‚´ì•¼ê² ë‹¤ê³  ìƒê°í•˜ê²Œëœ ê²°ì •ì ì¸ ê³„ê¸°ìž…ë‹ˆë‹¤. ë¦¬íŒ©í† ë§í•˜ë©´ì„œ ìžì›ì„ CloudFormationì—ì„œ ë¶„ë¦¬í• ê±°ë¼ë©´ ì´ë²ˆ ê¸°íšŒì— Terraformìœ¼ë¡œ ëª¨ë‘ ì˜®ê¸°ìžê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.

---

## AWS CDKì—ì„œ Terraformìœ¼ë¡œ ìžì› ì´ë™í•˜ê¸°

CloudFormationì˜ ìŠ¤íƒì„ ê·¸ëƒ¥ ì‚­ì œí•˜ê²Œ ë˜ë©´ ê·¸ ì•ˆì— í¬í•¨ëœ ìžì›ë„ í•¨ê»˜ ì‚­ì œë©ë‹ˆë‹¤. S3ë‚˜, DynamoDB, SQS Queue ë“±ê³¼ ê°™ì€ ìžì›ì€ ë°ì´í„°ë„ í•¨ê»˜ ì‚­ì œ ë  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ì´ëŸ¬í•œ ìžì›ì˜ ê²½ìš° ìŠ¤íƒì„ ì‚­ì œí•˜ê¸° ì „ì— ìžì›ì´ ì‚­ì œë˜ì§€ ì•Šë„ë¡ ì„¤ì •í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.

**ê¸°ì¡´ì— ê´€ë¦¬í•˜ëŠ” CDK ì†ŒìŠ¤ì½”ë“œë¥¼ ìˆ˜ì •í•˜ëŠ” ë°©ë²•**ì´ ìžˆìŠµë‹ˆë‹¤. AWS CDKì˜ ì½”ë“œë¥¼ ì‚¬ìš©í•œë‹¤ë©´ `removalPolicy`ë¥¼ `Retain`ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ìžì›ì— í•´ë‹¹í•˜ëŠ” ê°’ì´ í¬í•¨ë˜ì–´ìžˆìŠµë‹ˆë‹¤.

```typescript
import { Queue } from '@aws-cdk/aws-sqs'

const queueJobs = new Queue(this, 'Queue', {
  /* ... */
  removalPolicy: RemovalPolicy.RETAIN,
})
```

ë§Œì•½ì— ì†ŒìŠ¤ì½”ë“œì— ì ‘ê·¼í•  ìˆ˜ ìžˆëŠ” ìƒí™©ì´ë¼ë©´ **AWS CloudFormationì—ì„œ ì§ì ‘ ìˆ˜ì •í•˜ëŠ” ë°©ë²•**ì´ ìžˆìŠµë‹ˆë‹¤. ìŠ¤í¬ë¦°ìƒ·ê³¼ ê°™ì´ "ìŠ¤íƒ ì—…ë°ì´íŠ¸"ì— ë“¤ì–´ê°‘ë‹ˆë‹¤.

![](/images/2022/2022-09-30-aws-cdk-to-terraform/image1.png)

ê·¸ë¦¬ê³  ì‚­ì œë˜ë©´ ì•ˆë˜ëŠ” ìžì›ì„ ì°¾ì•„ì„œ `DeletionPolicy` í•­ëª©ì— `Delete`ë¼ê³  ì í˜€ìžˆëŠ” ë¶€ë¶„ì„ `Retain`ìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.

![](/images/2022/2022-09-30-aws-cdk-to-terraform/image2.png)

ìœ„ì™€ ê°™ì€ ì‹ìœ¼ë¡œ ì„œë¹„ìŠ¤ê°€ ë™ìž‘í•˜ëŠ”ë° í•„ìš”í•œ ìžì›ì„ ì „ë¶€ ì‚­ì œë˜ì§€ ì•Šë„ë¡ ìˆ˜ì •í•˜ê³  CloudFormation Stackì„ ì œê±°í•©ë‹ˆë‹¤.

ì´ì œ Terraformì— ìžì›ì„ ì¶”ê°€í•´ë´…ì‹œë‹¤. Terraformì€ AWS ìƒì— ë§Œë“¤ì–´ì ¸ìžˆëŠ” ìžì›ì„ ì¶”ê°€í•˜ëŠ” ê³¼ì •ì´ êµ‰ìž¥ížˆ ì‰½ìŠµë‹ˆë‹¤. ìš°ì„  ìžì›(resource)ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ì´ ë•Œ ìƒì„¸í•œ ì˜µì…˜ì„ ë‹¤ ìž…ë ¥í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤. ê³µì‹ ë¬¸ì„œì— ë‚˜ì˜¤ëŠ” í•„ìˆ˜ê°’ë§Œ ì±„ì›Œì¤ì‹œë‹¤.

```
resource "aws_sqs_queue" "my_queue" {
  name                       = "my_queue"
  delay_seconds              = 0
  max_message_size           = 262144
  visibility_timeout_seconds = 30
}
```

ì´ì œ Terraform `tfstate`ì— ìžì›ì„ ìž…ë ¥(`import`)í•©ë‹ˆë‹¤. ìžì›ë§ˆë‹¤ `import` í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ê³ ìœ ê°’ì´ ë‹¤ë¦…ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì€ ARNì„ ì‚¬ìš©í•˜ì§€ë§Œ ì•„ë‹Œ ê²½ìš°ë„ ìžˆìŠµë‹ˆë‹¤. ê³µì‹ë¬¸ì„œì— import í•­ëª©ì— ìž˜ ë‚˜ì™€ìžˆìŠµë‹ˆë‹¤.

[Terraform - aws_sqs_queue #import](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/sqs_queue#import)

ì¼ë‹¨ ARNì„ ë„£ì–´ë³´ê³  ì—ëŸ¬ë©”ì‹œì§€ë¥¼ ë³´ê³  ìˆ˜ì •í•˜ëŠ” ë°©ë²•ë„ ê´œì°®ìŠµë‹ˆë‹¤. ë‹¤ìŒê³¼ ê°™ì´ `import` ëª…ë ¹ì–´ë¥¼ ìž…ë ¥í•©ë‹ˆë‹¤.

```bash
terraform import \
  aws_sqs_queue.my_queue \
  https://sqs.ap-northeast-2.amazonaws.com/012345678910/my-queue
```

`plan` ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ì„œ ì‹¤ì œ ì„œë¹„ìŠ¤ì— ì ìš©ë˜ì–´ìžˆëŠ” ì˜µì…˜ê°’ê³¼ í˜„ìž¬ ì½”ë“œ ì‚¬ì´ì— ë‹¤ë¥¸ë¶€ë¶„ì„ ë¹„êµí•˜ë©´ì„œ ì½”ë“œë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤. ìˆ˜ì •í• ê²Œ ì—†ë‹¤ê³  ë‚˜ì˜¬ë•Œê¹Œì§€ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ê±°ë‚˜, ë¹ ì ¸ìžˆëŠ” ì˜µì…˜ê°’ì„ ì¶”ê°€í•©ë‹ˆë‹¤.

```bash
terraform plan
```

ìˆ˜ì •í• ê²Œ ì—†ë‹¤ê³  ë‚˜ì˜¤ë©´, `apply` ëª…ë ¹ì–´ë¥¼ í†µí•´ `tfstate`ì— ì ìš©í•©ë‹ˆë‹¤.

```bash
terraform apply
```

`plan` ëª…ë ¹ì–´ë¥¼ í†µí•´ ìƒíƒœë¥¼ ë³´ë©´ `(known after apply)`ê³¼ ê°™ì€ ë‚´ìš©ì´ ë‚˜ì˜¬ ë•Œê°€ ìžˆìŠµë‹ˆë‹¤. í•œë²ˆì— ë‘ê°œ ì´ìƒì˜ ìžì›ì„ ì •ì˜í•˜ê³ , ì´ ìžì›ê°„ì— ì˜ì¡´ê´€ê³„ê°€ ìžˆìœ¼ë©´ ë‚˜ì˜µë‹ˆë‹¤. ì´ëŸ´ ë•, ë‘ ìžì› ì¤‘ ê¸°ë°˜ì´ ë˜ëŠ” ìžì›ì„ ë¨¼ì € ì¶”ê°€í•˜ê³  `apply` í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì˜ì¡´í•˜ëŠ” ìžì›ì„ ì¶”ê°€í•˜ë©´ í•´ë‹¹ ë©”ì‹œì§€ê°€ ë‚˜ì˜¬ì¼ì´ ê±°ì˜ ì—†ìŠµë‹ˆë‹¤.

ê·¸ ì™¸, CDKì—ì„œ ìžë™ìœ¼ë¡œ ìƒì„±í•´ì£¼ëŠ” IAM Roleê³¼ ê°™ì€ ìžì›ë“¤ë„ ìžˆëŠ”ë°, ì´ëŠ” CloudFormationì— ë“¤ì–´ê°€ì„œ Templateì„ ì‚´íŽ´ë³´ë©´ ìžì„¸í•œ ë‚´ìš©ì„ í™•ì¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

### ì •ë¦¬

> "í˜„ìž¬ ì‚¬ìš©ì¤‘ì¸ ëª¨ë“  CloudFormationì„ ê±·ì–´ë‚¼ê±´ê°€ìš”?"  
> **"ì•„ë‹ˆì˜¤."**

ì™œëƒí•˜ë©´ CloudFormationì„ ê¸°ë°˜ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” í”„ë¡œì íŠ¸ê°€ CDKë§Œ ìžˆëŠ”ê²Œ ì•„ë‹ˆê¸° ë•Œë¬¸ìž…ë‹ˆë‹¤. Serverless FrameworkëŠ” CloudFormationìœ„ì— ì‚¬ìš©í•˜ê¸° ì‰½ê²Œ ë§Œë“¤ì–´ì§„ ì¢‹ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. Serverless FrameworkëŠ” ê°œë°œìž(íŠ¹ížˆ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìž)ê°€ CloudFormationì˜ ìžì„¸í•œ êµ¬ì¡°ë¥¼ ëª°ë¼ë„ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ë§Œì•½ Lambdaë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ CDKë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ì½”ë“œë¥¼ ì—…ë¡œë“œ í•˜ëŠ” ê³¼ì •ì¡°ì°¨ ì‰½ì§€ ì•ŠìŠµë‹ˆë‹¤. `node_modules`ë¥¼ í•¨ê»˜ ë„£ì–´ì¤˜ì•¼ í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ Serverlessë¥¼ ì´ìš©í•œë‹¤ë©´? ëˆ„êµ¬ë‚˜ ì†ì‰½ê²Œ AWSì— ë°°í¬ í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

> "í˜„ìž¬ ì‚¬ìš©ì¤‘ì¸ CDKë¥¼ ê±·ì–´ë‚¼ê±´ê°€ìš”?"  
> **"ë„¤."**.

Serverless FrameworkëŠ” ì„œë¹„ìŠ¤(ê°„ë‹¨í•œ WebHookê³¼ ê°™ì€)ì— ì¢…ì†ë˜ëŠ” ì•„ì£¼ ê°„ë‹¨í•œ ì¸í”„ë¼ë¥¼ ë§Œë“œëŠ”ë° íŠ¹í™”ë˜ì–´ìžˆìŠµë‹ˆë‹¤. ì´ì— ë¹„í•´ì„œ CDKëŠ” ë” í° ì¸í”„ë¼ë¥¼ ê´€ë¦¬í•˜ëŠ”ë° ì‚¬ìš©ë˜ëŠ” ë„êµ¬ ê°™ì€ë°, ê·œëª¨ê°€ ì»¤ì§ˆ ìˆ˜ë¡ ë” ê´€ë¦¬í•˜ê¸° ì–´ë ¤ì› ìŠµë‹ˆë‹¤. Terraformì€ ê·œëª¨ê°€ ì»¤ì§ˆìˆ˜ë¡ ê´€ë¦¬í•˜ê¸° ì‰¬ì› ìŠµë‹ˆë‹¤. AWSë¥¼ ë„˜ì–´ì„œ GCloud, Azureë¡œì˜ í™•ìž¥ê¹Œì§€ë„ ê³ ë ¤í•œë‹¤ë©´ Terraformì€ ì„ íƒì´ ì•„ë‹Œ í•„ìˆ˜ìž…ë‹ˆë‹¤.

í˜¹ì‹œë¼ë„ IaCë¥¼ ìœ„í•´ AWS CDKë¥¼ ê³ ë ¤í•˜ê³  ìžˆë‹¤ë©´ Terraformì„ ë¨¼ì € ì‚¬ìš©í•˜ì‹œëŠ” ê±¸ ì¶”ì²œë“œë¦½ë‹ˆë‹¤. ðŸ™‚

**ê·¸ ì™¸..**

> "'CDK for Terraform'ì´ë¼ëŠ” ë…€ì„ì´ ìžˆë‹¤ëŠ”ë°ìš”?"  
> **"ê·¸ëƒ¥ HCLë¡œ Terraform ì‚¬ìš©í•˜ì„¸ìš”. ðŸ¥²"**
